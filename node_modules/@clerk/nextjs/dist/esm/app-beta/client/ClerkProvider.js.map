{"version":3,"sources":["../../../../src/app-beta/client/ClerkProvider.tsx"],"sourcesContent":["'use client';\n// !!! Note the import from react\nimport type { ClerkProviderProps } from '@clerk/clerk-react';\nimport { ClerkProvider as ReactClerkProvider } from '@clerk/clerk-react';\nimport { usePathname, useRouter } from 'next/navigation';\nimport React, { useCallback, useEffect } from 'react';\n\ndeclare global {\n  export interface Window {\n    __clerk_nav_await: Array<(value: void) => void>;\n    __clerk_nav: (to: string) => Promise<void>;\n  }\n}\n\nexport const useAwaitableNavigate = () => {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  const { push, refresh } = useRouter();\n  const pathname = usePathname();\n\n  useEffect(() => {\n    window.__clerk_nav = (to: string) => {\n      return new Promise(res => {\n        window.__clerk_nav_await.push(res);\n        if (to === pathname) {\n          refresh();\n        } else {\n          push(to);\n        }\n      });\n    };\n  }, [pathname]);\n\n  useEffect(() => {\n    if (typeof window.__clerk_nav_await === 'undefined') {\n      window.__clerk_nav_await = [];\n    }\n    window.__clerk_nav_await.forEach(resolve => resolve());\n    window.__clerk_nav_await = [];\n  });\n\n  return useCallback((to: string) => {\n    return window.__clerk_nav(to);\n  }, []);\n};\n\nexport function ClerkProvider(props: ClerkProviderProps) {\n  const navigate = useAwaitableNavigate();\n  return (\n    <ReactClerkProvider\n      navigate={navigate}\n      {...props}\n    />\n  );\n}\n"],"mappings":";AAGA,SAAS,iBAAiB,0BAA0B;AACpD,SAAS,aAAa,iBAAiB;AACvC,OAAO,SAAS,aAAa,iBAAiB;AASvC,MAAM,uBAAuB,MAAM;AAExC,QAAM,EAAE,MAAM,QAAQ,IAAI,UAAU;AACpC,QAAM,WAAW,YAAY;AAE7B,YAAU,MAAM;AACd,WAAO,cAAc,CAAC,OAAe;AACnC,aAAO,IAAI,QAAQ,SAAO;AACxB,eAAO,kBAAkB,KAAK,GAAG;AACjC,YAAI,OAAO,UAAU;AACnB,kBAAQ;AAAA,QACV,OAAO;AACL,eAAK,EAAE;AAAA,QACT;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,GAAG,CAAC,QAAQ,CAAC;AAEb,YAAU,MAAM;AACd,QAAI,OAAO,OAAO,sBAAsB,aAAa;AACnD,aAAO,oBAAoB,CAAC;AAAA,IAC9B;AACA,WAAO,kBAAkB,QAAQ,aAAW,QAAQ,CAAC;AACrD,WAAO,oBAAoB,CAAC;AAAA,EAC9B,CAAC;AAED,SAAO,YAAY,CAAC,OAAe;AACjC,WAAO,OAAO,YAAY,EAAE;AAAA,EAC9B,GAAG,CAAC,CAAC;AACP;AAEO,SAAS,cAAc,OAA2B;AACvD,QAAM,WAAW,qBAAqB;AACtC,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACC,GAAG;AAAA;AAAA,EACN;AAEJ;","names":[]}