{"version":3,"sources":["../../../../src/app-router/client/ClerkProvider.tsx"],"sourcesContent":["'use client';\nimport { ClerkProvider as ReactClerkProvider } from '@clerk/clerk-react';\nimport { useRouter } from 'next/navigation';\nimport React from 'react';\n\nimport { ClerkNextOptionsProvider } from '../../client-boundary/NextOptionsContext';\nimport { useSafeLayoutEffect } from '../../client-boundary/useSafeLayoutEffect';\nimport type { NextClerkProviderProps } from '../../types';\nimport { useAwaitableNavigate } from './useAwaitableNavigate';\n\ndeclare global {\n  export interface Window {\n    __clerk_nav_await: Array<(value: void) => void>;\n    __clerk_nav: (to: string) => Promise<void>;\n  }\n}\n\nexport const ClientClerkProvider = (props: NextClerkProviderProps) => {\n  const { __unstable_invokeMiddlewareOnAuthStateChange = true } = props;\n  const router = useRouter();\n  const navigate = useAwaitableNavigate();\n\n  useSafeLayoutEffect(() => {\n    window.__unstable__onBeforeSetActive = () => {\n      if (__unstable_invokeMiddlewareOnAuthStateChange) {\n        router.refresh();\n        router.push(window.location.href);\n      }\n    };\n\n    window.__unstable__onAfterSetActive = () => {\n      router.refresh();\n    };\n  }, []);\n\n  const mergedProps = { ...props, navigate };\n  return (\n    <ClerkNextOptionsProvider options={mergedProps}>\n      {/*// @ts-ignore*/}\n      <ReactClerkProvider {...mergedProps} />\n    </ClerkNextOptionsProvider>\n  );\n};\n"],"mappings":";AACA,SAAS,iBAAiB,0BAA0B;AACpD,SAAS,iBAAiB;AAC1B,OAAO,WAAW;AAElB,SAAS,gCAAgC;AACzC,SAAS,2BAA2B;AAEpC,SAAS,4BAA4B;AAS9B,MAAM,sBAAsB,CAAC,UAAkC;AACpE,QAAM,EAAE,+CAA+C,KAAK,IAAI;AAChE,QAAM,SAAS,UAAU;AACzB,QAAM,WAAW,qBAAqB;AAEtC,sBAAoB,MAAM;AACxB,WAAO,gCAAgC,MAAM;AAC3C,UAAI,8CAA8C;AAChD,eAAO,QAAQ;AACf,eAAO,KAAK,OAAO,SAAS,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO,+BAA+B,MAAM;AAC1C,aAAO,QAAQ;AAAA,IACjB;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM,cAAc,EAAE,GAAG,OAAO,SAAS;AACzC,SACE,oCAAC,4BAAyB,SAAS,eAEjC,oCAAC,sBAAoB,GAAG,aAAa,CACvC;AAEJ;","names":[]}