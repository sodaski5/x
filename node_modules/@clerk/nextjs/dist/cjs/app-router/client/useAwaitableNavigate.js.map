{"version":3,"sources":["../../../../src/app-router/client/useAwaitableNavigate.ts"],"sourcesContent":["'use client';\n\nimport { usePathname, useRouter, useSearchParams } from 'next/navigation';\nimport { useCallback, useEffect } from 'react';\n\ndeclare global {\n  interface Window {\n    __clerk_nav_ref: (to: string) => any;\n    __clerk_nav_resolves_ref: Array<(val?: any) => any> | undefined;\n  }\n}\n\nexport const useAwaitableNavigate = () => {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  const { push } = useRouter();\n  const pathname = usePathname();\n  const params = useSearchParams();\n  // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n  const urlKey = pathname + params.toString();\n\n  useEffect(() => {\n    window.__clerk_nav_ref = (to: string) => {\n      if (to === window.location.href.replace(window.location.origin, '')) {\n        push(to);\n        return Promise.resolve();\n      }\n\n      return new Promise<void>(res => {\n        if (window.__clerk_nav_resolves_ref) {\n          window.__clerk_nav_resolves_ref.push(res);\n        } else {\n          window.__clerk_nav_resolves_ref = [res];\n        }\n        push(to);\n      });\n    };\n  }, [urlKey]);\n\n  useEffect(() => {\n    if (window.__clerk_nav_resolves_ref && window.__clerk_nav_resolves_ref.length) {\n      window.__clerk_nav_resolves_ref.forEach(resolve => resolve());\n    }\n    window.__clerk_nav_resolves_ref = [];\n  });\n\n  return useCallback((to: string) => {\n    return window.__clerk_nav_ref(to);\n  }, []);\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,wBAAwD;AACxD,mBAAuC;AAShC,MAAM,uBAAuB,MAAM;AAExC,QAAM,EAAE,KAAK,QAAI,6BAAU;AAC3B,QAAM,eAAW,+BAAY;AAC7B,QAAM,aAAS,mCAAgB;AAE/B,QAAM,SAAS,WAAW,OAAO,SAAS;AAE1C,8BAAU,MAAM;AACd,WAAO,kBAAkB,CAAC,OAAe;AACvC,UAAI,OAAO,OAAO,SAAS,KAAK,QAAQ,OAAO,SAAS,QAAQ,EAAE,GAAG;AACnE,aAAK,EAAE;AACP,eAAO,QAAQ,QAAQ;AAAA,MACzB;AAEA,aAAO,IAAI,QAAc,SAAO;AAC9B,YAAI,OAAO,0BAA0B;AACnC,iBAAO,yBAAyB,KAAK,GAAG;AAAA,QAC1C,OAAO;AACL,iBAAO,2BAA2B,CAAC,GAAG;AAAA,QACxC;AACA,aAAK,EAAE;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF,GAAG,CAAC,MAAM,CAAC;AAEX,8BAAU,MAAM;AACd,QAAI,OAAO,4BAA4B,OAAO,yBAAyB,QAAQ;AAC7E,aAAO,yBAAyB,QAAQ,aAAW,QAAQ,CAAC;AAAA,IAC9D;AACA,WAAO,2BAA2B,CAAC;AAAA,EACrC,CAAC;AAED,aAAO,0BAAY,CAAC,OAAe;AACjC,WAAO,OAAO,gBAAgB,EAAE;AAAA,EAClC,GAAG,CAAC,CAAC;AACP;","names":[]}