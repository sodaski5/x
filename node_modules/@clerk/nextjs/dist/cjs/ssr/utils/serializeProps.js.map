{"version":3,"sources":["../../../../src/ssr/utils/serializeProps.ts"],"sourcesContent":["import type { GetServerSidePropsResult } from 'next';\n\nimport type { AuthData } from '../types';\n\n/**\n * @param callbackResult The results from the wrapped (user-provided) getServerSideProps callback.\n * @param authData\n */\nexport function injectSSRStateIntoProps(callbackResult: any, authData: AuthData): GetServerSidePropsResult<any> {\n  return {\n    ...callbackResult,\n    props: injectSSRStateIntoObject(callbackResult.props, authData),\n  };\n}\n\nexport const injectSSRStateIntoObject = (obj: any, authData: AuthData) => {\n  // Serializing the state on dev env is a temp workaround for the following issue:\n  // https://github.com/vercel/next.js/discussions/11209|Next.js\n  const __clerk_ssr_state =\n    process.env.NODE_ENV !== 'production' ? JSON.parse(JSON.stringify({ ...authData })) : { ...authData };\n  return { ...obj, __clerk_ssr_state };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQO,SAAS,wBAAwB,gBAAqB,UAAmD;AAC9G,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO,yBAAyB,eAAe,OAAO,QAAQ;AAAA,EAChE;AACF;AAEO,MAAM,2BAA2B,CAAC,KAAU,aAAuB;AAGxE,QAAM,oBACJ,QAAQ,IAAI,aAAa,eAAe,KAAK,MAAM,KAAK,UAAU,EAAE,GAAG,SAAS,CAAC,CAAC,IAAI,EAAE,GAAG,SAAS;AACtG,SAAO,EAAE,GAAG,KAAK,kBAAkB;AACrC;","names":[]}